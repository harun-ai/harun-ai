<div class="container" *ngIf="modelTemplate">
    <div (click)="goToHome()" class="breadcrumb">
        <img src="../../../assets/Line 2.png" width="15px" alt="">
        <span>Ata de reunião</span>
    </div>

    <div class="template-area" *ngIf="!isLoading && !isResult && stepTemplate">
        <div class="steps">
            <div class="step" *ngFor="let obj of modelTemplate; let i = index" [ngClass]="step == i+1 ? 'active':''"></div>
        </div>

        <div class="template-content" *ngIf="stepTemplate.type == 'string' && stepTemplate.enum">
            <div class="template-content" [ngClass]="step == 3 ? 'custom-width':''">
                <span class="template-content-title">Por fim, selecione como gostaria que o tom de voz da sua <i>Ata
                        de
                        reunião</i> fosse:</span>
                <div class="template-content-input">
                    <div class="box-type-model">                        
                        <h4>Selecione o tipo da Ata</h4>
                        <mat-form-field appearance="fill">
                            <mat-label>Selecione</mat-label>
                            <mat-select [(ngModel)]="objSend[stepTemplate.key]">                              
                              <mat-option *ngFor="let ata of stepTemplate.enum" value="{{ata}}">{{ata}}</mat-option>                              
                            </mat-select>
                          </mat-form-field>
                    </div>
                </div>
            </div>
        </div>
        <div class="template-content" *ngIf="stepTemplate.type == 'string' && !stepTemplate.enum">
            <span class="template-content-title">{{ stepTemplate.title }}</span>
            <div class="template-content-input">
                <textarea type="text" class="custom-input" [(ngModel)]="objSend[stepTemplate.key]"
                    placeholder="Comece digitando..."></textarea>
                <span class="hint-text"><u class="cursor-pointer" (click)="openDialog()">Clique aqui</u> para saber como escrever da melhor forma.</span>
            </div>
        </div>

        <div class="template-buttons" >
            <button class="btn-cancel" (click)="cancel()">Cancelar</button>
            <div class="right-buttons">
                <button class="btn-skip" (click)="nextStep()" *ngIf="step != modelTemplate.length && skip == true">Pular
                    <img class="icon-right" src="../../../assets/line right.png" width="12px" alt="">
                </button>

                <button class="btn-previous" *ngIf="step > 1" (click)="previousStep()">Anterior</button>

                <button class="btn-next" *ngIf="step != modelTemplate.length" [ngClass]="step == 1 ? 'custom-margin':''"
                    (click)="nextStep()">Próximo</button>
                <button class="btn-generate" *ngIf="step == modelTemplate.length" (click)="generateTemplate()">Gerar</button>
            </div>
        </div>

    </div>

    <div class="template-area" *ngIf="isLoading && !isResult">
        <div class="loading-area">
            <div class="loading-circle"></div>
            <span>Estou gerando o template <i>{{modelName}}</i>, aguarde alguns instantes</span>
        </div>
    </div>

    <div class="result-area" *ngIf="!isLoading && isResult">
        <div>

            <div class="result-title">
                <span>Aqui está o seu resultado</span>
                <div (click)="generateAgain()" class="cursor-pointer generate-again">
                    <span> Gerar novamente </span>
                    <img src="../../../assets/circle_left.png" width="24px" height="24px" alt="">
                </div>
            </div>
            <textarea class="text-generate" type="text">{{textResult}}</textarea>
            <div class="result-buttons">
                <button (click)="backToModelTemplate()" class="btn-edit cursor-pointer">editar</button>
                <div class="result-buttons-right">
                    <div>
                        <span id="textCopy" class="text-copied">texto copiado!</span>
                        <button id="btnCopy" class="btn-copy cursor-pointer" (click)="copyMessage()">copiar</button>
                    </div>
                        <a [href]="fileUrl" download="file.txt">
                        <button class="btn-export" (click)="exportTxt()">Exportar .txt</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="feedback">
            <div class="feedback-title">
                <span>O que você achou do resultador?</span>
            </div>
            <div class="feedback-icon">
                <div class="thumb" (click)="feedback(true)">
                    <img src="../../../assets/thumb_up.png" width="24px" height="24px" alt="">
                </div>
                <div class="thumb" (click)="feedback(false)">
                    <img src="../../../assets/thumb_down.png" width="24px" height="24px" alt="">
                </div>
            </div>
        </div>
    </div>
</div>